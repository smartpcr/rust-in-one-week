# -Cehcont-guard: EH Continuation Metadata - Protects exception handlers from being hijacked by attackers
# -Ccontrol-flow-guard: CFG - Prevents exploits that redirect code execution (required by OneBranch security scans)
# -Ctarget-feature=+crt-static: Static CRT - Bundles C runtime into binary; required for Spectre-mitigated CRT linking
[target.'cfg(target_os = "windows")']
rustflags = ["-Ccontrol-flow-guard", "-Ctarget-feature=+crt-static"]

# -DYNAMICBASE: ASLR - Randomizes memory layout to prevent exploits
# CETCOMPAT: Intel CET Shadow Stack - Hardware-enforced return address protection; modern CPUs validate return addresses
[target.'cfg(all(target_os = "windows", any(target_arch = "x86", target_arch = "x86_64")))']
rustflags = ["-Clink-args=/DYNAMICBASE /CETCOMPAT"]

[registries]
github = { index = "sparse+https://cargo.pkg.github.com/smartpcr/rust-in-one-week/index/" }